(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],[,,,,,function(e,t,a){e.exports={MessageOther:"Message_MessageOther__1HgkM",MessageMe:"Message_MessageMe__1UYXW",MessageJoin:"Message_MessageJoin__1LHGk",MessageDisjoin:"Message_MessageDisjoin__i_W7F"}},function(e,t,a){e.exports={JoinPage:"Login_JoinPage__2snEu",JoinPageFlex:"Login_JoinPageFlex__J2wV2",Error:"Login_Error__2qqY3"}},,function(e,t,a){e.exports={header:"Header_header__1gtQA"}},,,function(e,t,a){e.exports={ChatHistory:"ChatHistory_ChatHistory__37Zrc"}},function(e,t,a){e.exports={ChatInput:"ChatInput_ChatInput__t2p0Y"}},function(e,t,a){e.exports=a(20)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(10),r=a.n(o),c=(a(18),a(7)),i=a(1),m=a(2),l=a(4),u=a(3),d=(a(19),"ws://"+window.location.hostname),h=new WebSocket(d+":8080/ws"),g=function(e){console.log("Attempting Connection...."),h.onopen=function(){console.log("Successfully Connected")},h.onmessage=function(t){console.log(t),e(t)},h.onclose=function(e){console.log("Socket Closed Connection: ",e)},h.onerror=function(e){console.log("Socket error: ",e)}},f=function(e){console.log("Sending msg"),h.send(e)},p=a(8),E=a.n(p),v=function(e){return s.a.createElement("div",{className:E.a.header},s.a.createElement("h2",null," Realtime Chat App "),s.a.createElement("h2",null," Room ID: ",e.roomID),s.a.createElement("h2",null," UserName: ",e.username),s.a.createElement("button",{onClick:function(){return e.Exithandler()},className:E.a.exit}," EXIT "))},b=a(11),y=a.n(b),H=a(5),R=a.n(H),M=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(i.a)(this,a),n=t.call(this,e);var s=JSON.parse(n.props.message);return n.state={message:s},n}return Object(m.a)(a,[{key:"render",value:function(){var e;switch(this.state.message.Type){case 1:case 2:e=s.a.createElement("div",{className:R.a.MessageJoin},s.a.createElement("h3",null,this.state.message.Body));break;case 4:e=s.a.createElement("div",{className:R.a.MessageDisjoin},this.state.message.Body);break;case 3:e=this.props.username===this.state.message.Username?s.a.createElement("div",{className:R.a.MessageMe},this.state.message.Body):s.a.createElement("div",{className:R.a.MessageOther},s.a.createElement("b",null,this.state.message.Username)," ",this.state.message.Body)}return s.a.createElement("div",null,e)}}]),a}(n.Component),C=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this;console.log(this.props.chatHistory);var t=this.props.chatHistory.map((function(t){return s.a.createElement(M,{message:t.data,username:e.props.username})}));return s.a.createElement("div",{className:y.a.ChatHistory},s.a.createElement("h2",null," Chat History"),t)}}]),a}(n.Component),N=a(12),_=a.n(N),I=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:_.a.ChatInput},s.a.createElement("input",{onKeyDown:this.props.send}))}}]),a}(n.Component),J=function(e){return s.a.createElement("div",null,s.a.createElement(v,{roomID:e.roomid,username:e.username,members:e.members,Exithandler:e.Exithandler}),s.a.createElement(C,{chatHistory:e.chatHistory,username:e.username}),s.a.createElement(I,{send:e.send}))},O=a(6),k=a.n(O),D=function(e){var t=e.error.status?s.a.createElement("div",{className:k.a.Error},e.error.message):null;return s.a.createElement("div",{className:k.a.JoinPage},s.a.createElement("div",{className:k.a.JoinPageFlex},s.a.createElement("div",null," USERNAME "),s.a.createElement("div",null,s.a.createElement("input",{onChange:e.NameHandler,type:"text",required:!0,placeholder:"Enter Name ......"}))),s.a.createElement("div",{className:k.a.JoinPageFlex},s.a.createElement("div",null," ROOM ID "),s.a.createElement("div",null," ",s.a.createElement("input",{onChange:e.RoomIDHandler})," ")),s.a.createElement("div",{className:k.a.JoinPageFlex},s.a.createElement("button",{onClick:e.JoinRoomHandler},"Join"),s.a.createElement("button",{onClick:e.CreateRoomHandler}," Create ")),t)},j=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).Message=function(e,t,a,n){return{type:e,username:t,roomid:a,body:n}},n.CheckUserName=function(){return 0!==n.state.Username.length||(console.log("Username is empty"),n.setState((function(e){return{error:{status:!0,message:"Username can not be empty"}}})),!1)},n.CheckRoomID=function(){return 0===n.state.RoomID.length?(n.setState((function(e){return{error:{status:!0,message:"Roomid can not be empty"}}})),!1):!isNaN(n.state.RoomID)||(n.setState((function(e){return{error:{status:!0,message:"Roomid must be a number"}}})),!1)},n.NameHandler=function(e){n.setState({Username:e.target.value})},n.RoomIDHandler=function(e){n.setState({RoomID:parseInt(e.target.value,10)})},n.JoinRoomHandler=function(){if(n.CheckUserName()&&n.CheckRoomID()){var e=n.Message(1,n.state.Username,n.state.RoomID,"");e=JSON.stringify(e),console.log("sending request to join room",e),f(e)}},n.CreateRoomHandler=function(){if(n.CheckUserName()){var e=n.Message(2,n.state.Username,n.state.RoomID,"");e=JSON.stringify(e),console.log("sending request to create room",e),f(e)}},n.ExitHandler=function(){var e=n.Message(5,n.state.Username,n.state.RoomID,"disconnect");e=JSON.stringify(e),console.log("sending request to exit room",e),f(e)},n.send=function(e){if(13===e.keyCode){var t=n.Message(3,n.state.Username,n.state.RoomID,e.target.value);t=JSON.stringify(t),f(t),e.target.value=""}},n.state={chatHistory:[],RoomJoined:!1,Username:"",RoomID:-1,Members:[],error:{status:!1,message:""}},g(),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;g((function(t){var a=JSON.parse(t.data);switch(console.log(a.Type),a.Type){case 1:console.log("Join Request approved"),e.setState((function(n){return{RoomJoined:!0,RoomID:parseInt(a.RoomID,10),Members:a.RoomMembers,chatHistory:[].concat(Object(c.a)(e.state.chatHistory),[t]),error:{status:!1,message:""}}}));break;case 3:console.log("New message recieved"),e.setState((function(a){return{chatHistory:[].concat(Object(c.a)(e.state.chatHistory),[t]),error:{status:!1,message:""}}}));break;case 4:console.log(" A User has been disconnected"),e.setState((function(n){return{chatHistory:[].concat(Object(c.a)(e.state.chatHistory),[t]),Members:a.RoomMembers,error:{status:!1,message:""}}}));break;case 5:console.log(" User has been disconnected"),e.setState((function(e){return{chatHistory:[],RoomJoined:!1,RoomID:-1,UserName:"",Members:[],error:{status:!1,message:""}}}));break;case 0:console.log("An error has occured"),e.setState((function(e){return{error:{status:!0,message:a.Body}}}))}}))}},{key:"render",value:function(){var e=this.state.RoomJoined?s.a.createElement("div",null,s.a.createElement(J,{roomid:this.state.RoomID,username:this.state.Username,members:this.state.Members,chatHistory:this.state.chatHistory,send:this.send,Exithandler:this.ExitHandler})):s.a.createElement("div",null,s.a.createElement(D,{error:this.state.error,NameHandler:this.NameHandler,RoomIDHandler:this.RoomIDHandler,CreateRoomHandler:this.CreateRoomHandler,JoinRoomHandler:this.JoinRoomHandler})," ");return s.a.createElement("div",{className:"App"},e)}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[13,1,2]]]);
//# sourceMappingURL=main.66285121.chunk.js.map